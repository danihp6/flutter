import 'package:flutter/material.dart';

void main() => runApp(MyApp());

class MyApp extends StatefulWidget {
  _MyApp createState()=> _MyApp();
}

class _MyApp extends State<MyApp>{
  String _tab;

  @override
  Widget build(BuildContext context) {
    final tabs = <Tab>[
    Tab(icon: Icon(Icons.android),text: "tab1"),
    Tab(icon: Icon(Icons.settings),text: "tab2"),
    Tab(icon: Icon(Icons.search),text: "tab3")
  ];
  _tab= tabs[0].text;

  final pages = <Widget>[
    Center(child: Text("page1")),
    Center(child: Text("page2")),
    Center(child: Text("page3"))
  ];
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      theme: ThemeData(

        primarySwatch: Colors.red,
      ),
      home: DefaultTabController(
        length: tabs.length,
        child:Scaffold(
          
          body: CustomScrollView(
            slivers: <Widget>[
              SliverAppBar(
                pinned: true,
                expandedHeight: 160,
                flexibleSpace: FlexibleSpaceBar(
                  title: Text(_tab),
                  centerTitle: true,
                  background: TabBar(
                    tabs:tabs,
                    onTap: (value){
                      setState(() {
                        _tab=tabs[value].text;
                        print(_tab);
                      });
                    },
                ),
                ),
              ),
              SliverFillRemaining(
                child:TabBarView(
                  children:pages,
                ),
              )
            ],
          )
        ),
      ),
    );
  }
}
